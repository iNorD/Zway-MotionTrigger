{
    "author": "Maroš Kollár",
    "category": "complex_applications",
    "defaults": {
        "description": "__m_descr__",
        "recheckPreconditions": false,
        "timeout": 180,
        "title": "__m_title__"
    },
    "dependencies": [
        "BaseModule"
    ],
    "homepage": "https://github.com/maros/Zway-MotionTrigger/",
    "icon": "icon.png",
    "maturity": "stable",
    "moduleName": "MotionTrigger",
    "options": {
        "fields": {
            "dimmer": {
                "order": 3,
                "fields": {
                    "mode": {
                        "optionLabels": [
                            "__dimmer_mode_full__",
                            "__dimmer_mode_static__",
                            "__dimmer_mode_code__",
                            "__dimmer_mode_dynamic__"
                        ],
                        "type": "select",
                        "oder": 1,
                        "label": "__dimmer_mode_label__",
                        "helper": "__dimmer_mode_helper__"
                    },
                    "code": {
                        "dependencies": {
                            "mode": "code"
                        },
                        "label": "__dimmer_code_label__",
                        "helper": "__dimmer_code_helper__",
                        "order": 2,
                        "type": "textarea"
                    },
                    "static": {
                        "label": "__dimmer_static_label__",
                        "dependencies": {
                            "mode": "static"
                        },
                        "order": 3
                    },
                    "dynamic": {
                        "label": "__dimmer_dynamic_label__",
                        "order": 4,
                        "dependencies": {
                            "mode": "dynamic"
                        },
                        "fields": {}
                    }
                },
                "type": "object"
            },
            "lights": {
                "fields": {
                    "item": {
                        "datasource": "namespaces",
                        "field": "optionLabels",
                        "optionLabels": "namespaces:devices_switchBinary:deviceName,namespaces:devices_switchMultilevel:deviceName",
                        "type": "select"
                    }
                },
                "label": "__lights_label__",
                "order": 2
            },
            "preconditions": {
                "helper": "__preconditions_helper__",
                "label": "__preconditions_label__",
                "order": 5,
                "fields": {
                    "recheck": {
                        "helper": "__recheck_preconditions_helper__",
                        "label": "__recheck_preconditions_label__",
                        "order": 4
                    },
                    "binary": {
                        "helper": "__binary_helper__",
                        "label": "__binary_label__",
                        "order": 1,
                        "items": {
                            "fields": {
                                "device": {
                                    "datasource": "namespaces",
                                    "field": "optionLabels",
                                    "label": "",
                                    "optionLabels": "namespaces:devices_sensorBinary:deviceName,namespaces:devices_switchBinary:deviceName",
                                    "order": 1,
                                    "type": "select"
                                },
                                "value": {
                                    "order": 2
                                }
                            }
                        }
                    },
                    "multilevel": {
                        "label": "__multilevel_label__",
                        "order": 2,
                        "helper": "__multilevel_helper__",
                        "items": {
                            "fields": {
                                "device": {
                                    "datasource": "namespaces",
                                    "field": "optionLabels",
                                    "label": "",
                                    "optionLabels": "namespaces:devices_sensorMultilevel:deviceName,namespaces:devices_switchMultilevel:deviceName",
                                    "order": 1,
                                    "type": "select"
                                },
                                "operator": {
                                    "optionLabels": [
                                        "=",
                                        "≠",
                                        ">",
                                        "≥",
                                        "<",
                                        "≤"
                                    ],
                                    "order": 2,
                                    "type": "select"
                                },
                                "value": {
                                    "order": 3
                                }
                            }
                        }
                    },
                    "time": {
                        "helper": "__time_helper__",
                        "label": "__time_label__",
                        "order": 3,
                        "items": {
                            "fields": {
                                "dayofweek": {
                                    "label": "__dayofweek_label__",
                                    "optionLabels": [
                                        "__dayofweek_0__",
                                        "__dayofweek_1__",
                                        "__dayofweek_2__",
                                        "__dayofweek_3__",
                                        "__dayofweek_4__",
                                        "__dayofweek_5__",
                                        "__dayofweek_6__"
                                    ],
                                    "type": "checkbox"
                                },
                                "timeFrom": {
                                    "label": "__time_from_label__",
                                    "maskString": "99:99",
                                    "order": 1,
                                    "placeholder": "__time_placeholder__",
                                    "type": "time"
                                },
                                "timeTo": {
                                    "label": "__time_to_label__",
                                    "maskString": "99:99",
                                    "order": 2,
                                    "placeholder": "__time_placeholder__",
                                    "type": "time"
                                }
                            }
                        }
                    }
                }
            },
            "securitySensors": {
                "fields": {
                    "item": {
                        "datasource": "namespaces",
                        "field": "devices",
                        "optionLabels": "namespaces:devices_sensorBinary:deviceName",
                        "type": "select"
                    }
                },
                "label": "__security_sensors_label__",
                "order": 1
            },
            "timeout": {
                "helper": "__timeout_helper__",
                "label": "__timeout_label__",
                "order": 8
            }
        }
    },
    "repository": {
        "source": "https://github.com/maros/Zway-MotionTrigger",
        "type": "git"
    },
    "schema": {
        "properties": {
            "dimmer": {
                "properties": {
                    "mode": {
                        "enum": [
                            "full",
                            "static",
                            "code",
                            "dynamic"
                        ],
                        "default": "full",
                        "required": true,
                        "type": "string"
                    },
                    "code": {
                        "type": "string",
                        "dependencies": "mode"
                    },
                    "static": {
                        "dependencies": "mode",
                        "type": "number"
                    },
                    "dynamic": {
                        "dependencies": "mode",
                        "type": "object",
                        "properties": {}
                    }
                },
                "type": "object"
            },
            "lights": {
                "items": {
                    "datasource": "namespaces",
                    "enum": "namespaces:devices_switchBinary:deviceId,namespaces:devices_switchMultilevel:deviceId",
                    "field": "enum",
                    "required": true
                },
                "minItems": 1,
                "type": "array",
                "uniqueItems": true
            },
            "preconditions": {
                "properties": {
                    "recheck": {
                        "required": true,
                        "type": "boolean"
                    },
                    "binary": {
                        "items": {
                            "properties": {
                                "device": {
                                    "datasource": "namespaces",
                                    "enum": "namespaces:devices_sensorBinary:deviceId,namespaces:devices_switchBinary:deviceId",
                                    "field": "enum",
                                    "required": true
                                },
                                "value": {
                                    "default": "on",
                                    "enum": [
                                        "off",
                                        "on"
                                    ],
                                    "required": true,
                                    "type": "string"
                                }
                            },
                            "type": "object"
                        },
                        "type": "array"
                    },
                    "multilevel": {
                        "items": {
                            "properties": {
                                "device": {
                                    "datasource": "namespaces",
                                    "enum": "namespaces:devices_sensorMultilevel:deviceId,namespaces:devices_switchMultilevel:deviceId,namespaces:devices_battery:deviceId",
                                    "field": "enum",
                                    "required": true
                                },
                                "operator": {
                                    "enum": [
                                        "=",
                                        "!=",
                                        ">",
                                        ">=",
                                        "<",
                                        "<="
                                    ],
                                    "required": true,
                                    "type": "string"
                                },
                                "value": {
                                    "required": true,
                                    "type": "number"
                                }
                            },
                            "type": "object"
                        },
                        "type": "array"
                    },
                    "time": {
                        "items": {
                            "properties": {
                                "dayofweek": {
                                    "enum": [
                                        "0",
                                        "1",
                                        "2",
                                        "3",
                                        "4",
                                        "5",
                                        "6"
                                    ],
                                    "type": "array"
                                },
                                "timeFrom": {
                                    "pattern": "^([01]?[0-9]|2[0-3]):([0-5][0-9])$",
                                    "placeholder": "__time_placeholder__",
                                    "required": true,
                                    "type": "string"
                                },
                                "timeTo": {
                                    "pattern": "^([01]?[0-9]|2[0-3]):([0-5][0-9])$",
                                    "placeholder": "__time_placeholder__",
                                    "required": true,
                                    "type": "string"
                                }
                            },
                            "type": "object"
                        },
                        "type": "array"
                    }
                },
                "required": true,
                "type": "object"
            },
            "securitySensors": {
                "items": {
                    "datasource": "namespaces",
                    "enum": "namespaces:devices_sensorBinary:deviceId",
                    "field": "enum",
                    "required": true
                },
                "minItems": 1,
                "type": "array",
                "uniqueItems": true
            },
            "timeout": {
                "minimum": 1,
                "required": true,
                "type": "integer"
            }
        },
        "required": true,
        "type": "object"
    },
    "singleton": false,
    "version": 1.04
}